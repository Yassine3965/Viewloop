<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ViewLoop Monitor</title>
  <link rel="stylesheet" href="popup.css">
</head>

<body>
  <div class="bg-blob"></div>
  <div class="container">

    <!-- HEADER -->
    <div class="header">
      <div class="logo-container">
        <img src="icon48.png" alt="ViewLoop" class="logo-img">
        <h1 class="app-title">ViewLoop</h1>
      </div>
      <div id="connectionStatus" class="status-badge">
        <span class="status-dot"></span>
        <span id="statusText">ุฌุงุฑู ุงูุงุชุตุงู...</span>
        <button id="refreshSyncBtn" title="ุชุฌุฏูุฏ ุงููุฒุงููุฉ"
          style="background:none; border:none; cursor:pointer; padding:0 4px; color:rgba(255,255,255,0.7);">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M23 4v6h-6"></path>
            <path d="M1 20v-6h6"></path>
            <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
          </svg>
        </button>
      </div>
    </div>

    <!-- USER INFO (Hidden until loaded) -->
    <div id="userCard" class="user-card" style="display: none;">
      <img id="userAvatar" src="icon48.png" alt="Avatar" class="avatar">
      <div class="user-details">
        <h2 id="userName" class="username">ุงููุณุชุฎุฏู</h2>
        <span id="userLevel" class="user-level">ุงููุณุชูู 1</span>
      </div>
    </div>

    <!-- AUTH PROMPT -->
    <div id="loginPrompt" class="auth-card" style="display: none;">
      <div class="auth-header-card">
        <h3 class="auth-title">ViewLoop</h3>
        <p class="auth-subtitle">ุณุฌู ุฏุฎููู ูููุฒุงููุฉ ููุณุจ ุงูุฌูุงุฆุฒ</p>
      </div>

      <div class="auth-actions-container">
        <button id="googleLoginBtn" class="btn btn-google">
          <svg viewBox="0 0 48 48" width="24" height="24">
            <path fill="#FFC107"
              d="M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12s5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z">
            </path>
            <path fill="#FF3D00"
              d="M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z">
            </path>
            <path fill="#4CAF50"
              d="M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.222,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z">
            </path>
            <path fill="#1976D2"
              d="M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571l6.19,5.238C42.022,35.138,44,30.025,44,24C44,22.659,43.862,21.35,43.611,20.083z">
            </path>
          </svg>
          <span>ุงููุชุงุจุนุฉ ุจุงุณุชุฎุฏุงู Google</span>
        </button>

        <div class="auth-divider">
          <span>ุฃู</span>
        </div>

        <button id="webLoginBtn" class="btn btn-primary">
          <span>ุชุณุฌูู ุฏุฎูู</span>
        </button>

        <button id="webRegisterBtn" class="btn btn-secondary">
          <span>ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ</span>
        </button>
      </div>

      <p class="auth-footer-help">ุณูุชู ุชูุฌููู ูููููุน ูุฅุชูุงู ุงูุนูููุฉ ุจุฃูุงู</p>
    </div>

    <!-- STATS -->
    <div class="stats-grid">
      <div class="stat-item stat-points">
        <span class="stat-icon">๐</span>
        <span id="userPoints" class="stat-value">--</span>
        <span class="stat-label">ููุงุท</span>
      </div>
      <div class="stat-item stat-gems">
        <span class="stat-icon">๐</span>
        <span id="userGems" class="stat-value">--</span>
        <span class="stat-label">ุฌูุงูุฑ</span>
      </div>
    </div>

    <!-- PROGRESS BARS (Active Session) -->
    <div id="progressSection" class="progress-section">
      <div class="progress-label">
        <span>ุงููุฏุฉ ุงูุฃุตููุฉ: <span id="videoDurationLabel">0:00</span></span>
        <span id="progTextMain">0%</span>
      </div>
      <div class="progress-track">
        <div id="barMain" class="progress-fill"></div>
      </div>

      <div class="progress-label">
        <span>ููุช ุฅุถุงูู (ููุงูุขุช ุฃุนูู)</span>
        <span id="progTextExtra" style="color:#f59e0b">0%</span>
      </div>
      <div class="progress-track">
        <div id="barExtra" class="progress-fill extra"></div>
      </div>
    </div>

    <!-- ACTIONS -->
    <div class="actions">
      <button id="startWatchBtn" class="btn btn-primary">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polygon points="5 3 19 12 5 21 5 3"></polygon>
        </svg>
        ุงุจุฏุฃ ุงููุดุงูุฏุฉ
      </button>

      <button id="openDashboardBtn" class="btn btn-secondary">
        ููุญุฉ ุงูุชุญูู
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
          <polyline points="15 3 21 3 21 9"></polyline>
          <line x1="10" y1="14" x2="21" y2="3"></line>
        </svg>
      </button>
    </div>

    <div class="footer">
      Version 1.0.1 โข Running Securely
    </div>
  </div>

  <script src="popup.js"></script>
</body>

</html>